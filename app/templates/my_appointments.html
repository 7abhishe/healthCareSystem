{% extends "base.html" %}

{% block title %}My Appointments - Hospital AI{% endblock %}

{% block content %}
<div class="animate-fade-in">
    <h2 class="text-center" style="margin-bottom: 2rem;">üìã My Appointments</h2>

    {% if appointments %}
    <div class="grid-menu" style="grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));">
        {% for appt in appointments %}
        <div class="card">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                <h3 style="color: var(--secondary);">Dr. {{ appt.doctor }}</h3>
                <span
                    style="background: rgba(16, 185, 129, 0.2); color: var(--accent-success); padding: 0.2rem 0.6rem; border-radius: 4px; font-size: 0.8rem;">Confirmed</span>
            </div>

            <p><strong>üìÖ Date:</strong> {{ appt.date }}</p>
            <p><strong>‚è∞ Time:</strong> {{ appt.slot }}</p>

            <hr style="border: 0; border-top: 1px solid rgba(255,255,255,0.1); margin: 1rem 0;">

            <form action="{{ url_for('appointments.reschedule') }}" method="POST"
                style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                <input type="hidden" name="old_doctor" value="{{ appt.doctor }}">
                <input type="hidden" name="old_date" value="{{ appt.date }}">
                <input type="hidden" name="old_slot" value="{{ appt.slot }}">

                <select name="new_slot" style="flex: 1; margin-bottom: 0;">
                    <option value="10-11 AM">10-11 AM</option>
                    <option value="11-12 PM">11-12 PM</option>
                    <option value="3-4 PM">3-4 PM</option>
                    <option value="4-5 PM">4-5 PM</option>
                </select>
                <button type="submit" class="btn" style="background: rgba(255, 255, 255, 0.1);">Reschedule</button>
            </form>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="card text-center" style="max-width: 500px; margin: 2rem auto;">
        <p style="color: var(--text-muted); padding: 2rem;">No appointments found.</p>
        <a href="{{ url_for('appointments.book_appointment') }}" class="btn btn-primary">Book Now</a>
    </div>
    {% endif %}
</div>
{% endblock %}