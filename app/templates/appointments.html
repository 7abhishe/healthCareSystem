from flask import Blueprint, render_template, request, redirect, url_for, session

appointments = Blueprint('appointments', __name__)

@appointments.route('/book_appointment', methods=['GET', 'POST'])
def book_appointment():
    if request.method == 'POST':
        patient = request.form['patient']
        doctor = request.form['doctor']
        date = request.form['date']
        slot = request.form['slot']

        # Save appointment logic here (file/db)
        # Example: session store (for demo purpose)
        session['last_appointment'] = {
            "patient": patient,
            "doctor": doctor,
            "date": date,
            "slot": slot
        }

        # ✅ After booking → redirect to record page
        return redirect(url_for('record.record_page'))

    return render_template('book_appointment.html')